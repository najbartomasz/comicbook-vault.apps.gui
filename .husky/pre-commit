#!/bin/sh

if git diff --cached --name-only | grep -q "^src/app/"; then
  echo "üìä Updating architecture metrics..."
  npm run docs:metrics --silent >/dev/null 2>&1

  if ! git diff --quiet docs/ARCHITECTURE.md; then
    echo "‚ùå Architecture metrics have changed. Please review and add them:"
    echo "   git add docs/ARCHITECTURE.md"
    echo "   git commit --amend --no-edit"
    exit 1
  fi
fi
